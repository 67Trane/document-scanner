services:
  nginx:
    image: nginx:alpine
    container_name: myapp-nginx
    ports:
      - "8080:80"  # Seite unter http://NAS-IP:8080
    volumes:
      # Angular build
      - /docker/myapp/frontend:/usr/share/nginx/html:ro
      # nginx config
      - /docker/myapp/nginx/nginx.conf:/etc/nginx/conf.d/default.conf:ro
    depends_on:
      - backend
    restart: unless-stopped

  backend:
    build:
      context: /docker/myapp/backend
    container_name: myapp-backend
    volumes:
      - /docker/myapp/data/db:/app/db
      - /docker/myapp/data/media:/app/media
      - /docker/myapp/data/static:/app/static
    environment:
      # Example env vars
      DJANGO_SETTINGS_MODULE: dein_projekt_name.settings
      PYTHONUNBUFFERED: "1"
      # DB config etc.
    restart: unless-stopped

  filewatcher:
    build:
      context: /docker/myapp/filewatcher
    container_name: myapp-filewatcher
    volumes:
      # Ordner, den dein Script beobachten soll:
      - /docker/myapp/watch:/watch
    restart: unless-stopped
